import{J as de,K as ce,d as R,a as X,c as F,L as j,M as q,b as Z,o as c,i as h,r as B,N as V,O as H,g as W,P as ve,Q as fe,R as me,h as C,T as pe,n as m,p as U,s as G,j as _,U as _e,V as Ce,W as J,X as ge,_ as he,Y as ye,w as g,Z as f,$ as K,k as Ve,F as N,A as M,S as O,a0 as be,a1 as we,a2 as Ie,q as Y,y as Se,a3 as Le,e as z,D as Ee,v as ke}from"./index-4cd8479d.js";var x=Symbol("COLLAPSE_BIND_COLLAPSE_ITEM_KEY"),ee=Symbol("COLLAPSE_COUNT_COLLAPSE_ITEM_KEY");function Pe(){var{bindChildren:e,childProviders:n}=ce(x),{length:l}=de(ee);return{length:l,collapseItem:n,bindCollapseItem:e}}var Te={modelValue:{type:[Array,String,Number]},accordion:{type:Boolean,default:!1},offset:{type:Boolean,default:!0},onChange:R(),"onUpdate:modelValue":R()},{n:Ae}=Z("collapse");function Ne(e,n){return c(),h("div",{class:V(e.n())},[B(e.$slots,"default")],2)}var ae=X({name:"VarCollapse",props:Te,setup(e){var{length:n,collapseItem:l,bindCollapseItem:b}=Pe(),s=F(()=>e.modelValue),i=F(()=>e.offset),v=()=>!e.accordion&&!H(e.modelValue)?(console.error('[Varlet] Collapse: type of prop "modelValue" should be an Array'),!1):e.accordion&&H(e.modelValue)?(console.error('[Varlet] Collapse: type of prop "modelValue" should be a String or Number'),!1):!0,p=(o,t)=>v()?t?e.accordion?o:[...e.modelValue,o]:e.accordion?null:e.modelValue.filter(a=>a!==o):null,w=(o,t)=>{var a=p(o,t);W(e["onUpdate:modelValue"],a),W(e.onChange,a)},I=()=>{if(e.accordion)return l.find(t=>{var{name:a}=t;return e.modelValue===a.value});var o=l.filter(t=>{var{name:a}=t;return a.value===void 0?!1:e.modelValue.includes(a.value)});return o.length?o:void 0},E=()=>e.accordion?l.find(o=>{var{index:t,name:a}=o;return a.value===void 0?e.modelValue===t.value:!1}):l.filter(o=>{var{index:t,name:a}=o;return a.value===void 0?e.modelValue.includes(t.value):!1}),S=()=>{if(v()){var o=I()||E();if(e.accordion&&!o||!e.accordion&&!o.length){l.forEach(t=>{t.init(e.accordion,!1)});return}l.forEach(t=>{var a=e.accordion?o===t:o.includes(t);t.init(e.accordion,a)})}},k={active:s,offset:i,updateItem:w};return b(k),j(()=>n.value,()=>q().then(S)),j(()=>e.modelValue,()=>q().then(S)),{n:Ae}}});ae.render=Ne;const Q=ae;Q.install=function(e){e.component(Q.name,Q)};var Oe=Q;function Be(){var{parentProvider:e,bindParent:n}=ve(x),{index:l}=fe(ee);if(!e||!n||!l)throw Error("[Varlet] Collapse: <var-collapse-item/> must in <var-collapse>");return{index:l,collapse:e,bindCollapse:n}}var Ue={name:{type:[String,Number]},title:{type:String},icon:{type:String,default:"chevron-down"},disabled:{type:Boolean,default:!1}},{n:Qe,classes:$e}=Z("collapse-item");function De(e,n){var l=pe("var-icon");return c(),h("div",{class:V(e.classes(e.n(),[e.offset&&e.isShow,e.n("--active")],[e.disabled,e.n("--disable")]))},[m("div",{class:V(e.n("header")),onClick:n[0]||(n[0]=b=>e.toggle())},[m("div",{class:V(e.n("header-title"))},[B(e.$slots,"title",{},()=>[U(G(e.title),1)])],2),m("div",{class:V(e.n("header-icon"))},[B(e.$slots,"icon",{},()=>[_(l,{name:e.icon,transition:250,class:V(e.classes(e.n("header-icon"),[e.isShow&&e.icon==="chevron-down",e.n("header-open")],[e.disabled,e.n("header--disable")]))},null,8,["name","class"])])],2)],2),_e(m("div",{class:V(e.n("content")),ref:"contentEl",onTransitionend:n[1]||(n[1]=function(){return e.transitionend&&e.transitionend(...arguments)}),onTransitionstart:n[2]||(n[2]=function(){return e.start&&e.start(...arguments)})},[m("div",{class:V(e.n("content-wrap"))},[B(e.$slots,"default")],2)],34),[[Ce,e.show]])],2)}var ne=X({name:"VarCollapseItem",components:{VarIcon:me},props:Ue,setup(e){var{index:n,collapse:l,bindCollapse:b}=Be(),s=!0,i=C(null),v=C(!1),p=C(!1),{active:w,offset:I,updateItem:E}=l,S=F(()=>e.name),k=(d,P)=>{w.value===void 0||d&&H(w.value)||P===p.value||(p.value=P,o(!0))},o=d=>{e.disabled||d||E(e.name||n.value,!p.value)},t=()=>{i.value&&(i.value.style.height="",v.value=!0,q(()=>{var{offsetHeight:d}=i.value;i.value.style.height=0+"px",J(()=>{i.value.style.height=d+"px",s&&ge(()=>{s&&L()})})}))},a=()=>{s=!1},r=()=>{if(i.value){var{offsetHeight:d}=i.value;i.value.style.height=d+"px",J(()=>{i.value.style.height=0+"px"})}},L=()=>{p.value||(v.value=!1),i.value.style.height=""},D={index:n,name:S,init:k};return b(D),j(p,d=>{d?t():r()}),{n:Qe,start:a,classes:$e,show:v,isShow:p,offset:I,toggle:o,contentEl:i,transitionend:L}}});ne.render=De;const $=ne;$.install=function(e){e.component($.name,$)};var Ke=$;const Me={class:"vf-password"},Ye={key:0,class:"config-box"},ze={key:1},Fe={style:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"}},je={style:{textAlign:"center",marginTop:"15px"}},qe={class:"foot"},He={__name:"editConfig",setup(e){ye({});let n=C(!1),l=C(""),b=C(!1),s=C({}),i=C([]),v=C([1]),p=C(!1);const w=async()=>{await I(l.value)},I=async a=>{const{data:r}=await M.get_config_info({pwd:a});r!=null&&r.APP_TOKEN?(l.value=a,b.value=!0,localStorage.setItem("pwd",a),i.value=Object.keys(r),s.value=r):n.value=!0},E=async()=>{const a=localStorage.getItem("pwd");a?await I(a):n.value=!0},S=async()=>{const{data:a}=await M.save_config(l.value,s.value);a.code==0?O.success("修改成功"):O.error(a.msg)},k=async a=>{const{data:r}=await M.test_ql(a);r.success?O.success("青龙连接成功"):O.error(r.message)},o=a=>{s.value.Config.splice(a,1),console.log(a)},t=()=>{s.value.Config.push({ServerType:"ql",QLkey:s.value.Config.length+1,QLName:"青龙地址",QLurl:"",QL_CLIENTID:"",QL_SECRET:"",QL_CAPACITY:"",QL_WSCK:"",APP_TOKEN:""})};return E(),(a,r)=>{const L=Se,D=be,d=ke,P=we,le=Ke,oe=Oe,te=Le,re=Ie;return c(),h(N,null,[m("div",Me,[_(D,{show:f(n),"onUpdate:show":r[1]||(r[1]=u=>K(n)?n.value=u:n=u),confirmButtonText:"确认",onConfirm:w},{title:g(()=>[U(" 请先验证密码 ")]),default:g(()=>[_(L,{placeholder:"请输入密码",modelValue:f(l),"onUpdate:modelValue":r[0]||(r[0]=u=>K(l)?l.value=u:l=u),clearable:"",type:"password"},null,8,["modelValue"])]),_:1},8,["show"])]),f(b)?(c(),h("div",Ye,[_(re,{ref:"form",disabled:a.disabled,readonly:a.readonly,"scroll-to-error":"start"},{default:g(()=>[_(te,{direction:"column",size:[14,0]},{default:g(()=>[(c(!0),h(N,null,Y(f(i),(u,se)=>(c(),h("div",{key:se},[u!="Config"?(c(),z(L,{key:0,placeholder:u,modelValue:f(s)[u],"onUpdate:modelValue":y=>f(s)[u]=y},null,8,["placeholder","modelValue","onUpdate:modelValue"])):(c(),h("div",ze,[m("div",Fe,[m("span",null,G(u),1),_(d,{name:"plus",size:"25",onClick:t})]),_(oe,{modelValue:f(v),"onUpdate:modelValue":r[2]||(r[2]=y=>K(v)?v.value=y:v=y),onChange:a.changeHandle},{default:g(()=>[(c(!0),h(N,null,Y(f(s)[u],(y,T)=>(c(),z(le,{title:y.QLName,name:T+1,key:T},{icon:g(()=>[m("div",null,[_(d,{name:"minus",size:"25",onClick:Ee(A=>o(T),["stop"])},null,8,["onClick"])])]),default:g(()=>[(c(!0),h(N,null,Y(Object.keys(y),(A,ie)=>(c(),z(L,{placeholder:A,modelValue:f(s)[u][T][A],"onUpdate:modelValue":ue=>f(s)[u][T][A]=ue,key:ie},null,8,["placeholder","modelValue","onUpdate:modelValue"]))),128)),m("div",je,[_(P,{color:"var(--app-color)",type:"primary",onClick:A=>k(y)},{default:g(()=>[U("测试连接")]),_:2},1032,["onClick"])])]),_:2},1032,["title","name"]))),128))]),_:2},1032,["modelValue","onChange"])]))]))),128))]),_:1})]),_:1},8,["disabled","readonly"])])):Ve("",!0),m("div",qe,[_(P,{type:"primary",block:"",color:"var(--app-color)",loading:f(p),"loading-type":"rect",onClick:S},{default:g(()=>[U("保存配置")]),_:1},8,["loading"])])],64)}}},We=he(He,[["__scopeId","data-v-7fbdeff0"]]);export{We as default};
